import{G as D,_ as g,o as i,c as l,a as e,t as v,u as o,q as P,f as F,w as j,v as N,b as E,s as w,x as $,H as L,I as T,h,p,F as m,r as S}from"./index-5f0350c3.js";const b=D("taskStore",{state:()=>({tasks:[],isLoading:!1}),getters:{favs(){return this.tasks.filter(s=>s.isFav)},favCount(){return this.tasks.reduce((t,s)=>s.isFav?t+1:t,0)},totalCount:t=>t.tasks.length},actions:{async getTasks(){this.loading=!0;const s=await(await fetch("http://localhost:3000/tasks")).json();this.tasks=s,this.loading=!1},async addTask(t){this.tasks.push(t);const s=await fetch("http://localhost:3000/tasks",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});s.error&&console.log(s.error)},async deleteTask(t){this.tasks=this.tasks.filter(a=>a.id!==t);const s=await fetch("http://localhost:3000/tasks/"+t,{method:"DELETE"});s.error&&console.log(s.error)},async toggleFav(t){const s=this.tasks.find(n=>n.id===t);s.isFav=!s.isFav;const a=await fetch("http://localhost:3000/tasks/"+t,{method:"PATCH",body:JSON.stringify({isFav:s.isFav}),headers:{"Content-Type":"application/json"}});a.error&&console.log(a.error)}}});const M={class:"task"},O={class:"icons"},A={__name:"TaskDetails",props:{task:{type:Object,required:!0}},setup(t){const s=b();return(a,n)=>(i(),l("div",M,[e("h3",null,v(t.task.title),1),e("div",O,[e("i",{class:"material-icons",onClick:n[0]||(n[0]=d=>o(s).deleteTask(t.task.id))},"delete"),e("i",{class:P(["material-icons",{active:t.task.isFav}]),onClick:n[1]||(n[1]=d=>o(s).toggleFav(t.task.id))},"favorite",2)])]))}},C=g(A,[["__scopeId","data-v-0c7b2b3b"]]);const B=t=>(w("data-v-9362bc8a"),t=t(),$(),t),H=["onSubmit"],q=B(()=>e("button",null,"Add",-1)),J={__name:"TaskForm",setup(t){const s=b(),a=F(""),n=()=>{a.value.length>0&&(s.addTask({title:a.value,isFav:!1,id:Math.floor(Math.random()*1e4)}),a.value="")};return(d,u)=>(i(),l("form",{onSubmit:E(n,["prevent"])},[j(e("input",{type:"text",placeholder:"I need to...","onUpdate:modelValue":u[0]||(u[0]=_=>a.value=_)},null,512),[[N,a.value]]),q],40,H))}},R=g(J,[["__scopeId","data-v-9362bc8a"]]);const x=t=>(w("data-v-f9bdd753"),t=t(),$(),t),Y=x(()=>e("header",null,[e("img",{src:"https://pinia.vuejs.org/logo.svg",alt:"pinia logo"}),e("h1",null,"Pinia tasks")],-1)),z={class:"new-task-form"},G={class:"filter"},U={key:0,class:"loading"},K={key:1,class:"task-list"},Q={key:2,class:"task-list"},W=x(()=>e("h5",null,"Counter from Home:",-1)),X={__name:"PiniaView",setup(t){const s=b(),a=L(),{loading:n,tasks:d,favs:u,favCount:_,totalCount:I}=T(s),{count:V}=T(a),{increaseCount:y}=a;s.getTasks();const k=F("all");return(Z,c)=>(i(),l(m,null,[e("main",null,[Y,e("div",z,[h(R)]),e("nav",G,[e("button",{onClick:c[0]||(c[0]=r=>k.value="all")},"All tasks"),e("button",{onClick:c[1]||(c[1]=r=>k.value="favs")},"Fav tasks")]),o(n)?(i(),l("div",U,"Loading tasks...")):p("",!0),k.value==="all"?(i(),l("div",K,[e("p",null,"You have "+v(o(I))+" tasks left to do",1),(i(!0),l(m,null,S(o(d),(r,f)=>(i(),l("div",{key:f},[h(C,{task:r},null,8,["task"])]))),128))])):p("",!0),k.value==="favs"?(i(),l("div",Q,[e("p",null,"You have "+v(o(_))+" favs left to do",1),(i(!0),l(m,null,S(o(u),(r,f)=>(i(),l("div",{key:f},[h(C,{task:r},null,8,["task"])]))),128))])):p("",!0),e("button",{onClick:c[2]||(c[2]=(...r)=>o(s).$reset&&o(s).$reset(...r)),class:"reset-btn"},"Reset store")]),e("footer",null,[e("div",null,[W,e("button",{onClick:c[3]||(c[3]=(...r)=>o(y)&&o(y)(...r))},v(o(V)),1)])])],64))}},st=g(X,[["__scopeId","data-v-f9bdd753"]]);export{st as default};
